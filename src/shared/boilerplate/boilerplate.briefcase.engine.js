/* dist/boilerplate.briefcase.engine.js v1.4.1 Mon Jan 17 2022 13:00:51 GMT-0500 (Eastern Standard Time) */
!function(){this.Briefcase=function(){var i=this;i.prefix="briefcase_",i.MAX_LIMIT=500,i.debug_mode=!1,i.test_error_data=!1,i.data_attr_briefcase="data-rep-briefcase",i.data_attr_trigger="data-rep-trigger",i.match_environment_url="localhost",i.onload_briefcase_event="onload-briefcase-object",i.briefcase_storage_id="briefcase-obj",i.briefcase_call_id="call-id",i.is_veeva_env="localhost:3000"!==window.location.host,i.data_attr_key="data-rep-key",i.data_attr_value="data-rep-value",i.briefcase_status="Staged_vod";var o,c,r=null,n=[];this.getDataObject=function(){return i.debug_mode&&localStorage.clear(),new Promise(function(_,e){t().then(function(e){var t;d("is new session...",e),e?a().then(function(e){var t=u(e);localStorage.setItem(i.briefcase_storage_id,JSON.stringify(t)),_(t),d("getting live data...",t)}).catch(function(e){var t=u(e);localStorage.clear(),t.record_count=0,t.success=!1,_(t),d("getting live error data...",t)}):(t=localStorage.getItem(i.briefcase_storage_id),_(JSON.parse(t)),d("getting cached data...",t))})})},this.getBriefcaseIDs=function(){var t=[];return i.getBriefcaseConfigs().forEach(function(e){t.push(e.id)}),t},this.getBriefcaseConfigs=function(){var _=[];return document.querySelectorAll("["+i.data_attr_briefcase+"]").forEach(function(e){var t={};t.id=e.getAttribute(i.data_attr_briefcase),t.key=e.getAttribute(i.data_attr_key),t.value=e.getAttribute(i.data_attr_value),_.push(t)}),_};var d=function(e,t){i.debug_mode&&console.log(e,t)},t=function(){return new Promise(function(t,e){var _,a=localStorage.getItem(i.briefcase_call_id);i.is_veeva_env?com.veeva.clm.getDataForCurrentObject("Call","Id",function(e){e.success?e.Call.Id===a?t(!1):(localStorage.setItem(i.briefcase_call_id,e.Call.Id),t(!0)):t(!0)}):(_=E(!0)).success?_.Call.Id===a?t(!1):(localStorage.setItem(i.briefcase_call_id,_.Call.Id),t(!0)):t(!0)})},u=function(e){var t={};return t.result=e,t.message=void 0!==e.message?e.message:"",!1===t.result.success?(t.result=[],t.success=!1):(t.result=e,t.success=!0),t.record_count=t.result.length,t},a=function(){return new Promise(function(t,_){var e=i.getBriefcaseIDs();l(0,e,[]).then(function(e){t(e)}).catch(function(e){_(e)})})},l=function(s,n,r){if(!(s>=n.length))return new Promise(function(t,_){var a=n[s],e=i.getBriefcaseConfigs().filter(function(e){return e.id===a});o=e[0].key,c=e[0].value,d("Briefcase ID..",a),briefcase_status=v(),briefcase_status.then(function(e){d("briefcase_status..",e),f(a).then(function(e){var t=u(e[a]);t.briefcase_id=a,r.push(t)}).then(l.bind(null,s+1,n,r)).then(function(){t(r)})}).catch(function(e){_(e)})})},f=function(a){return new Promise(function(_,t){e(a).then(s).then(m).then(g).then(p).then(P).then(b).then(h).then(function(e){var t={};t[a]=e,_(t)}).catch(function(e){t(e)})})},e=function(e){var t={object_name:"Clm_Presentation_vod__c",fields:["Id","Name","Approved_vod__c","Presentation_Id_vod__c"]};return t.where_clause='WHERE Presentation_Id_vod__c = "'+e+'"',t.sort_clause=["Name, ASC"],t.limit=1,d("Getting results for function getBriefcasePresentationData",""),A(t,_(i.test_error_data))},v=function(){return new Promise(function(t,e){i.is_veeva_env?com.veeva.clm.getDataForCurrentObject("Presentation","Status_vod__c",function(e){try{e.success?(i.briefcase_status=e.Presentation.Status_vod__c,d("Getting results for function Presentation.Status_vod__c",e.Presentation.Status_vod__c)):(d("NOT Getting results for function Presentation.Status_vod__c",""),i.briefcase_status="Staged_vod"),t(i.briefcase_status)}catch(e){d("Error Result:",e),t(e)}}):(i.briefcase_status="Staged_vod",t(i.briefcase_status))})},s=function(e){if(!e.success)return e;var t={},_=e[0].Id;return t.object_name="Clm_Presentation_Slide_vod__c",t.fields=["Id","Key_Message_vod__c","Display_Order_vod__c"],t.where_clause='WHERE Clm_Presentation_vod__c = "'+_+'"',t.sort_clause=["Display_Order_vod__c, ASC"],t.limit=i.MAX_LIMIT,d("Getting results for function getBriefcasePresentationSlideData",""),A(t,S(i.test_error_data))},m=function(e){if(!e.success)return e;var _=[],t={};return(n=e).forEach(function(e){var t='Id = "'+e.Key_Message_vod__c+'"';_.push(t)}),t.object_name="Key_Message_vod__c",t.fields=["Id","Name","Media_File_Name_vod__c","Description_vod__c"],t.where_clause="WHERE "+_.join(" OR "),t.sort_clause=null,t.limit=i.MAX_LIMIT,d("Getting results for function getBriefcaseKeyMessageData",""),A(t,B(i.test_error_data))},g=function(_){if(!_.success)return _;var a=[];n.forEach(function(t){var e=_.filter(function(e){return t.Key_Message_vod__c===e.Id});0<e.length&&a.push(e[0])});var e,s=[],t={};return(r=a).forEach(function(e){var t='Presentation_Id_vod__c = "'+e.Name+'"';s.push(t)}),query_join=s.join(" OR "),t.object_name="Clm_Presentation_vod__c",t.fields=["Id","Name","Approved_vod__c","Status_vod__c","Presentation_Id_vod__c"],t.where_clause="WHERE ("+query_join+') AND Status_vod__c = "'+i.briefcase_status+'"',t.sort_clause=["Name, ASC"],t.limit=i.MAX_LIMIT,d("presentation status",i.briefcase_status),null!==o&&null!==c&&(query_custom_clause=o+' = "'+c+'"',t.where_clause="WHERE ("+query_join+") AND "+query_custom_clause),d("Getting results for function getPresentationData",""),e=A(t,y(i.test_error_data)),d("presentation_data",e),e},p=function(e){if(!e.success)return e;var _=[],t={};return e.forEach(function(e){var t='( Clm_Presentation_vod__c = "'+e.Id+'" AND Display_Order_vod__c = 1.0)';_.push(t)}),t.object_name="Clm_Presentation_Slide_vod__c",t.fields=["Id","Display_Order_vod__c","Clm_Presentation_vod__c","Key_Message_vod__c"],t.where_clause="WHERE "+_.join(" OR "),t.sort_clause=null,t.limit=i.MAX_LIMIT,d("Getting results for function getPresentationSlideData",""),A(t,N(i.test_error_data))},P=function(e){if(!e.success)return e;var _=[],t={};return e.forEach(function(e){var t='Id = "'+e.Key_Message_vod__c+'"';_.push(t)}),t.object_name="Key_Message_vod__c",t.fields=["Id","Media_File_Name_vod__c"],t.where_clause="WHERE "+_.join(" OR "),t.sort_clause=null,t.limit=i.MAX_LIMIT,d("Getting results for function getPresentationKeyMessageData",""),A(t,C(i.test_error_data))},b=function(e){if(!e.success)return e;return I(0,e,[])},I=function(a,s,n){if(!(a>=s.length))return new Promise(function(e,t){var _=s[a].Id;D(_).then(function(e){s[a].Presentation_Id_vod__c=e,n.push(s[a])}).then(I.bind(null,a+1,s,n)).then(function(){e(n)}).catch(function(e){t(e)})})},h=function(n){return!1===n.success?n:new Promise(function(e,t){d("Getting results for function getBriefcaseData",r);var s=[];r.forEach(function(e){var t={},_=e.Name,a=n.filter(function(e){return _===e.Presentation_Id_vod__c});0!==a.length&&(t.presentation_media=a[0].Media_File_Name_vod__c,t.presentation_id=e.Name,t.presentation_title=e.Description_vod__c,s.push(t))}),d("formatted briefcase array",s),e(s)})},D=function(s){return new Promise(function(_,a){var e,t='WHERE Key_Message_vod__c = "'+s+'"';i.is_veeva_env?com.veeva.clm.queryRecord("Clm_Presentation_Slide_vod__c",["Id","Clm_Presentation_vod__c"],t,null,1,function(e){var t;!0===e.success&&0<e.record_count?(t='WHERE Id = "'+e.Clm_Presentation_Slide_vod__c[0].Clm_Presentation_vod__c+'"',com.veeva.clm.queryRecord("Clm_Presentation_vod__c",["Id","Presentation_Id_vod__c"],t,null,1,function(e){!0===e.success&&0<e.record_count?_(e.Clm_Presentation_vod__c[0].Presentation_Id_vod__c):_(e.message)})):a(e.message)}):(e=M(i.test_error_data),_(e.Clm_Presentation_vod__c[0].Presentation_Id_vod__c))})},A=function(a,s){return new Promise(function(t,e){if(i.is_veeva_env)com.veeva.clm.queryRecord(a.object_name,a.fields,a.where_clause,a.sort_clause,a.limit,function(e){try{if(!e.success||0===e.record_count)throw e.success=!1,void 0===e.message&&(e.message="0 results"),e;e[a.object_name].success=!0,t(e[a.object_name]),d("DB query result:",e)}catch(e){d("Error Result:",e),t(e)}});else try{var _=s;if(!_.success||0===_.record_count)throw _.success=!1,void 0===_.message&&(_.message="0 results"),_;_[a.object_name].success=!0,t(_[a.object_name]),d("DB query result:",_)}catch(e){d("Error Result:",e),t(e)}})},_=function(e){return e?{success:!1,message:"getBriefcasePresentationTestData: function failed..."}:{Clm_Presentation_vod__c:[{Approved_vod__c:0,Id:"a115B000000MGrZQAW",Name:"Briefcase | Enterprise Briefcase Prototype",Presentation_Id_vod__c:"briefcase_enterprise_briefcase_prototype"}],success:!0,record_count:1}},S=function(e){return e?{success:!1,message:"getBriefcasePresentationSlideTestIDs: function failed..."}:{success:!0,Clm_Presentation_Slide_vod__c:[{Key_Message_vod__c:"a0D5B000000P0b8UAC",Id:"a1W5B000000QmnNUAS"},{Key_Message_vod__c:"a0D5B000000P0bEUAS",Id:"a1W5B000000QmnSUAS"},{Key_Message_vod__c:"a0D5B000000P0bFUAS",Id:"a1W5B000000QmnTUAS"},{Key_Message_vod__c:"a0D5B000000P0bDUAS",Id:"a1W5B000000QmnUUAS"}],record_count:4}},B=function(e){return e?{success:!1,message:"getBriefcaseKeyMessageTestData: function failed..."}:{success:!0,Key_Message_vod__c:[{Description_vod__c:"Briefcase | Presentation #1",Media_File_Name_vod__c:"enterprise_briefcase_presentation_iva.zip",Name:"enterprise_briefcase_presentation_1_iva",Id:"a0D5B000000P0bFUAS"},{Description_vod__c:"Briefcase | Presentation #2",Media_File_Name_vod__c:"enterprise_briefcase_presentation_2_iva.zip",Name:"enterprise_briefcase_presentation_2_iva",Id:"a0D5B000000P0b8UAC"},{Description_vod__c:"Briefcase |  Presentation #3",Media_File_Name_vod__c:"enterprise_briefcase_presentation_3_iva.zip",Name:"enterprise_briefcase_presentation_3_iva",Id:"a0D5B000000P0bDUAS"},{Description_vod__c:"Briefcase |  Presentation #4",Media_File_Name_vod__c:"enterprise_briefcase_presentation_4_iva.zip",Name:"enterprise_briefcase_presentation_4_iva",Id:"a0D5B000000P0bEUAS"}],record_count:4}},y=function(e){return e?{success:!1,message:"getPresentationTestData: function failed..."}:{Clm_Presentation_vod__c:[{Approved_vod__c:0,Id:"a115B000000KyTGQA0",Name:"Presentation #2",Presentation_Id_vod__c:"enterprise_briefcase_presentation_2_iva"},{Approved_vod__c:0,Id:"a115B000000JhxKQAS",Name:"Presentation #1",Presentation_Id_vod__c:"enterprise_briefcase_presentation_1_iva"},{Approved_vod__c:0,Id:"a115B000000KnBiQAK",Name:"Presentation #3",Presentation_Id_vod__c:"enterprise_briefcase_presentation_3_iva"},{Approved_vod__c:0,Id:"a115B000000KlfkQAC",Name:"Presentation #4",Presentation_Id_vod__c:"enterprise_briefcase_presentation_4_iva"}],success:!0,record_count:4}},N=function(e){return e?{success:!1,message:"getPresentationSlideTestData: function failed..."}:{success:!0,Clm_Presentation_Slide_vod__c:[{Display_Order_vod__c:1,Name:"CPS-000000031",Clm_Presentation_vod__c:"a115B000000JhxKQAS",Key_Message_vod__c:"a0D5B000000MtsYUAS",Id:"a1W5B000000PQJvUAO"},{Display_Order_vod__c:1,Name:"CPS-000000182",Clm_Presentation_vod__c:"a115B000000KlfkQAC",Key_Message_vod__c:"a0D5B000000NXAqUAO",Id:"a1W5B000000QNjKUAW"},{Display_Order_vod__c:1,Name:"CPS-000000206",Clm_Presentation_vod__c:"a115B000000KnBiQAK",Key_Message_vod__c:"a0D5B000000NYbHUAW",Id:"a1W5B000000QSvwUAG"},{Display_Order_vod__c:1,Name:"CPS-000000291",Clm_Presentation_vod__c:"a115B000000KyTGQA0",Key_Message_vod__c:"a0D5B000000NmcGUAS",Id:"a1W5B000000QbZ9UAK"}],record_count:4}},C=function(e){return e?{success:!1,message:"getPresentationKeyMessageTestData: function failed..."}:{Key_Message_vod__c:[{Media_File_Name_vod__c:"enterprise_briefcase_presentation_1_iva_1.zip",Name:"Home Slide Title - Presentation #1",Id:"a0D5B000000MtsYUAS"},{Media_File_Name_vod__c:"enterprise_briefcase_presentation_4_iva_10.zip",Name:"Home Slide Title - Presentation #4",Id:"a0D5B000000NXAqUAO"},{Media_File_Name_vod__c:"enterprise_briefcase_presentation_3_iva_10.zip",Name:"Home Slide Title - Presentation #3",Id:"a0D5B000000NYbHUAW"},{Media_File_Name_vod__c:"enterprise_briefcase_presentation_2_iva_10.zip",Name:"Home Slide Title - Presentation #2",Id:"a0D5B000000NmcGUAS"}],success:!0,record_count:4}},M=function(e){return e?{success:!1,message:"getTestPresentationIDByKeyMessageID: function failed..."}:{Clm_Presentation_vod__c:[{Id:"a115B000000JhxKQAS",Presentation_Id_vod__c:"enterprise_briefcase_presentation_1_iva"}],success:!0,record_count:1}},E=function(e){return e?{Call:{Id:"D5466499-D318-4370-8757-6ACCD29D1DEE"},success:!0}:{message:"getDataForCurrentObject: getDataForObject called w…ch is not available in preview mode: Call2_vod__c",success:!1,code:1112}};window.addEventListener("unhandledrejection",function(e){e.preventDefault(),console.log("Reason: ",e.reason)}),window.addEventListener("rejectionhandled",function(e){console.log("REJECTIONHANDLED")})}}();